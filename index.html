<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Non-Fire FLSD Practice Test</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
  padding: 20px;
}
.container {
  max-width: 900px;
  margin: auto;
  background: white;
  padding: 25px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
h1 {
  text-align: center;
}
.question {
  margin-bottom: 20px;
}
.answers label {
  display: block;
  margin: 12px 0;
  cursor: pointer;
  font-size: 16px;
}
button {
  padding: 12px 20px;
  font-size: 16px;
  background: #0077cc;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
button:hover {
  background: #005fa3;
}
#result {
  margin-top: 20px;
  font-size: 20px;
  font-weight: bold;
  text-align: center;
}
.section-buttons {
  text-align: center;
  margin-bottom: 20px;
}
.section-buttons button {
  margin: 5px;
}
</style>
</head>

<body>
<div class="container">

<h1>Non-Fire FLSD Practice Test</h1>

<div class="section-buttons">
  <button onclick="startSection('section1')">CBR / Terrorism</button>
  <button onclick="startSection('section2')">Active Shooter</button>
  <button onclick="startSection('section3')">Natural Disasters</button>
  <button onclick="startFullExam()" style="background:#444;">Full Exam (75)</button>
</div>

<div id="quiz"></div>

<div style="text-align:center;">
  <button onclick="submitQuiz()">Submit Exam</button>
  <button onclick="startSection(currentSection || 'section1')" style="background:#444;margin-left:10px;">
    New Test
  </button>
</div>

<div id="result"></div>

</div>

<script>
/* ================= QUESTION BANK ================= */

const questionBank = {
  section1: {
    questions: [
      { q:"CBR stands for:", a:["Civil, Building, Response","Chemical, Biological, Radiological","Chemical, Bomb, Radiation","City, Borough, Response"], c:1 },
      { q:"Chemical agents typically cause immediate effects.", a:["True","False"], c:0 },
      { q:"Biological agents typically have delayed effects.", a:["True","False"], c:0 },
      { q:"Radiological incidents primarily cause harm through radiation exposure.", a:["True","False"], c:0 },
      { q:"A dirty bomb is best described as:", a:["Nuclear weapon","Pipe bomb with radioactive material","Chemical gas device","Biological dispersal device"], c:1 },
      { q:"Natural gas is lighter than air.", a:["True","False"], c:0 },
      { q:"Chemical agents most often cause:", a:["Delayed illness","Immediate symptoms","Long incubation","No odor"], c:1 },
      { q:"Biological agents can be tasteless and odorless.", a:["True","False"], c:0 },
      { q:"Radiological exposure may not cause immediate symptoms.", a:["True","False"], c:0 },
      { q:"Medical attention should be sought after any suspected CBR exposure.", a:["True","False"], c:0 },
      { q:"HVAC may be shut down to prevent spread of contaminants.", a:["True","False"], c:0 },
      { q:"Private sector threat outreach is provided by:", a:["FDNY","NYPD SHIELD","OEM","DOB"], c:1 },
      { q:"Radiological devices cause long-term contamination.", a:["True","False"], c:0 },
      { q:"Which is NOT a CBR agent?", a:["Anthrax","Sarin","Cesium","Natural gas"], c:3 },
      { q:"FDNY response categories include:", a:["Mandatory/Optional","Recommended/Acceptable/Unacceptable","Safe/Unsafe","Evacuate/Shelter"], c:1 },
      { q:"Self-evacuation without direction during CBR is unacceptable.", a:["True","False"], c:0 },
      { q:"Biological exposure is often detected over time.", a:["True","False"], c:0 },
      { q:"Radiological exposure primarily causes burns.", a:["True","False"], c:1 },
      { q:"Chemical agents often affect breathing.", a:["True","False"], c:0 },
      { q:"Shelter-in-place may be required during CBR events.", a:["True","False"], c:0 },
      { q:"Radiation is the primary hazard in radiological incidents.", a:["True","False"], c:0 },
      { q:"Delayed symptoms suggest a biological agent.", a:["True","False"], c:0 },
      { q:"CBR response requires coordination with responders.", a:["True","False"], c:0 },
      { q:"Chemical releases are always visible.", a:["True","False"], c:1 },
      { q:"Life safety is the top priority.", a:["True","False"], c:0 }
    ]
  },

  section2: {
    questions: [
      { q:"ABC protocol stands for:", a:["Avoid, Barricade, Confront","Alert, Block, Communicate","Assess, Bypass, Contain","Announce, Block, Control"], c:0 },
      { q:"Occupants must call 911 immediately during an active shooter.", a:["True","False"], c:0 },
      { q:"The threat location is known as the:", a:["Safe Zone","Affected Area","Command Post","Assembly Area"], c:1 },
      { q:"Manual pull stations should be activated during active shooter incidents.", a:["True","False"], c:1 },
      { q:"Pull stations are ONLY for smoke or fire.", a:["True","False"], c:0 },
      { q:"FLSD makes decisions during fires or if shooter is outside.", a:["True","False"], c:0 },
      { q:"If shooter is outside, fail-safe doors should be released.", a:["True","False"], c:0 },
      { q:"If shooter is inside, fail-safe doors should NOT be released.", a:["True","False"], c:0 },
      { q:"Active shooter incidents are law enforcement events.", a:["True","False"], c:0 },
      { q:"Law enforcement is Incident Commander during active shooter.", a:["True","False"], c:0 },
      { q:"Recommended action includes:", a:["Pull fire alarm","Barricade and silence phones","Gather in lobby","Confront shooter"], c:1 },
      { q:"Which is unacceptable?", a:["Calling 911","Following NYPD orders","Self-deploying","Barricading"], c:2 },
      { q:"A first responder kit includes:", a:["BIC","Floor plans","Keys","All of the above"], c:3 },
      { q:"Tenant rent rolls belong in a responder kit.", a:["True","False"], c:1 },
      { q:"Communication should be clear and concise.", a:["True","False"], c:0 },
      { q:"Affected areas should be avoided.", a:["True","False"], c:0 },
      { q:"Re-entry is authorized by:", a:["FLSD","Tenants","Law Enforcement","Security"], c:2 },
      { q:"Elevators should be used during active shooter evacuations.", a:["True","False"], c:1 },
      { q:"Civil disturbances require staff awareness.", a:["True","False"], c:0 },
      { q:"Partial evacuation may be appropriate.", a:["True","False"], c:0 },
      { q:"Speculative information should be shared.", a:["True","False"], c:1 },
      { q:"ABC applies to active shooter incidents.", a:["True","False"], c:0 },
      { q:"FLSD should confront the shooter.", a:["True","False"], c:1 },
      { q:"NYPD SHIELD focuses on threat awareness.", a:["True","False"], c:0 },
      { q:"Life safety is the priority.", a:["True","False"], c:0 }
    ]
  },

  section3: {
    questions: [
      { q:"TIPS stands for:", a:["Total, In-Place, Safe","Total Evacuation, In-Building Relocation, Partial Evacuation, Shelter-In-Place","Temporary Incident Protection System","Tactical Incident Plan"], c:1 },
      { q:"Gas leaks require full evacuation.", a:["True","False"], c:0 },
      { q:"If gas odor is faint, open windows.", a:["True","False"], c:0 },
      { q:"If gas odor is strong, leave immediately.", a:["True","False"], c:0 },
      { q:"Small water main breaks should be reported to 311.", a:["True","False"], c:0 },
      { q:"Major water main breaks require calling 911.", a:["True","False"], c:0 },
      { q:"Hurricane winds are stronger at higher elevations.", a:["True","False"], c:0 },
      { q:"Hurricanes are categorized from 1–5.", a:["True","False"], c:0 },
      { q:"Equipment below grade should be protected.", a:["True","False"], c:0 },
      { q:"Avoid windows and perimeter walls during disasters.", a:["True","False"], c:0 },
      { q:"CIMS defines emergency roles.", a:["True","False"], c:0 },
      { q:"There are three types of incident command.", a:["True","False"], c:0 },
      { q:"Single Command involves one agency.", a:["True","False"], c:0 },
      { q:"Unified Command involves multiple agencies.", a:["True","False"], c:0 },
      { q:"FDNY is Incident Commander during fires.", a:["True","False"], c:0 },
      { q:"Bomb threats always require evacuation.", a:["True","False"], c:1 },
      { q:"Natural disasters are non-fire emergencies.", a:["True","False"], c:0 },
      { q:"Occupants should be informed during emergencies.", a:["True","False"], c:0 },
      { q:"Partial evacuation affects only impacted areas.", a:["True","False"], c:0 },
      { q:"Shelter-in-place may be appropriate during external chemical releases.", a:["True","False"], c:0 },
      { q:"Utility failures are non-fire emergencies.", a:["True","False"], c:0 },
      { q:"Life safety is the primary goal.", a:["True","False"], c:0 },
      { q:"FLSD must communicate with responders.", a:["True","False"], c:0 },
      { q:"Windows are safe during hurricanes.", a:["True","False"], c:1 },
      { q:"Documentation is more important than life safety.", a:["True","False"], c:1 }
    ]
  }
};

/* ================= LOGIC ================= */

let selectedQuestions = [];
let currentSection = "";

function startSection(sectionKey) {
  currentSection = sectionKey;
  loadQuestions(questionBank[sectionKey].questions, 25);
}

function startFullExam() {
  currentSection = "full";
  loadQuestions(
    [
      ...questionBank.section1.questions,
      ...questionBank.section2.questions,
      ...questionBank.section3.questions
    ],
    75
  );
}

function loadQuestions(pool, count) {
  document.getElementById("result").innerHTML = "";
  selectedQuestions = [...pool].sort(() => 0.5 - Math.random()).slice(0, count);

  const quizDiv = document.getElementById("quiz");
  quizDiv.innerHTML = "";

  selectedQuestions.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `<strong>${i + 1}. ${q.q}</strong>`;

    const ansDiv = document.createElement("div");
    ansDiv.className = "answers";

    // Create each choice as a block-level label
    q.a.forEach(choice => {
      const label = document.createElement("label");
      label.style.display = "block";  // ensures vertical stacking
      label.style.margin = "6px 0";
      label.innerHTML = `<input type="radio" name="q${i}" value="${choice}"> ${choice}`;
      ansDiv.appendChild(label);
    });

    div.appendChild(ansDiv);
    quizDiv.appendChild(div);
  });
}


function submitQuiz() {
  let score = 0;
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = ""; // clear previous results

  let wrongQuestions = []; // array to store wrong answers

  selectedQuestions.forEach((q, i) => {
    const selected = document.querySelector(`input[name="q${i}"]:checked`);
    if (selected && selected.value === q.a[q.c]) {
      score++;
    } else {
      wrongQuestions.push({
        q: q.q,
        yourAnswer: selected ? selected.value : "No answer",
        correctAnswer: q.a[q.c]
      });
    }
  });

  const total = selectedQuestions.length;
  const percent = Math.round((score / total) * 100);
  const pass = percent >= 70 ? "PASS" : "FAIL";

  // Display main score
  resultDiv.innerHTML = `<p>Score: ${score} / ${total} (${percent}%) – <strong>${pass}</strong></p>`;

  // Display wrong answers
  if (wrongQuestions.length > 0) {
    const list = document.createElement("div");
    list.innerHTML = `<h3>Questions Answered Incorrectly:</h3>`;
    wrongQuestions.forEach(item => {
      const p = document.createElement("p");
      p.innerHTML = `<strong>Q:</strong> ${item.q}<br>
                     <strong>Your answer:</strong> ${item.yourAnswer}<br>
                     <strong>Correct answer:</strong> ${item.correctAnswer}`;
      list.appendChild(p);
    });
    resultDiv.appendChild(list);
  }
}
/* Auto-load first section */
startSection("section1");
</script>

</body>
</html>
